{"version":3,"file":"index.js","sources":["pages/identify/index.vue","../../../tool/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaWRlbnRpZnkvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"title\">种子识别系统</view>\n    <view v-if=\"imagePath\" class=\"preview-wrapper\">\n      <image :src=\"imagePath\" mode=\"aspectFit\" class=\"preview-image\"></image>\n      <view class=\"preview-actions\">\n        <button class=\"action-btn\" @click=\"handleDelete\">\n          <uni-icons type=\"closeempty\" size=\"22\" color=\"#fff\" />\n        </button>\n        <button class=\"action-btn\" @click=\"handleTakePhoto\">\n          <uni-icons type=\"camera\" size=\"22\" color=\"#fff\" />\n        </button>\n      </view>\n    </view>\n    <view v-else class=\"fab-container\">\n      <button class=\"fab\" @click=\"handleTakePhoto\">\n        <uni-icons type=\"camera\" size=\"36\" color=\"#fff\" />\n      </button>\n      <view class=\"fab-label\">拍照上传</view>\n    </view>\n    <button v-if=\"imagePath\" type=\"warn\" class=\"identify-btn\" @click=\"handleIdentify\">\n      <uni-icons type=\"search\" size=\"22\" color=\"#fff\" /> 开始识别\n    </button>\n    <view class=\"loading\" v-if=\"loading\">识别中...</view>\n  </view>\n</template>\n\n<script>\nimport { chooseAndUpload } from '@/utils/upload.js';\nimport uniIcons from '@dcloudio/uni-ui/lib/uni-icons/uni-icons.vue';\n\nexport default {\n  components: { uniIcons },\n  data() {\n    return {\n      imagePath: '',\n      loading: false\n    };\n  },\n  methods: {\n    async handleTakePhoto() {\n      try {\n        this.imagePath = await chooseAndUpload();\n      } catch (err) {\n        uni.showToast({\n          title: '选择图片失败',\n          icon: 'none'\n        });\n      }\n    },\n    handleDelete() {\n      this.imagePath = '';\n    },\n    async handleIdentify() {\n      if (!this.imagePath) return;\n      this.loading = true;\n      try {\n        const res = await plantApi.identifyPlant(this.imagePath);\n        const result = JSON.parse(res.data);\n        uni.navigateTo({\n          url: '/pages/identify/result?data=' + encodeURIComponent(JSON.stringify(result))\n        });\n      } catch (err) {\n        uni.showToast({\n          title: '识别失败',\n          icon: 'none'\n        });\n        console.error(err);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style>\n.container {\n  min-height: 100vh;\n  padding: 32px 18px;\n  background: linear-gradient(135deg, #e0f7fa 0%, #fffde4 100%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.title {\n  font-size: 30px;\n  margin-bottom: 32px;\n  font-weight: bold;\n  color: #009688;\n  letter-spacing: 2px;\n  text-shadow: 0 2px 8px #b2dfdb;\n}\n\n.fab-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 18px;\n}\n\n.fab {\n  background: linear-gradient(135deg, #009688 60%, #26c6da 100%);\n  border: none;\n  border-radius: 50%;\n  width: 68px;\n  height: 68px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 16px #b2dfdb;\n  margin-bottom: 8px;\n  transition: box-shadow 0.2s;\n}\n.fab:active {\n  box-shadow: 0 2px 8px #b2dfdb;\n}\n\n.fab-label {\n  font-size: 15px;\n  color: #009688;\n  font-weight: bold;\n  letter-spacing: 1px;\n}\n\n.preview-wrapper {\n  position: relative;\n  width: 90vw;\n  max-width: 350px;\n  margin-bottom: 18px;\n}\n.preview-image {\n  width: 100%;\n  height: 220px;\n  border-radius: 18px;\n  box-shadow: 0 4px 16px #b2dfdb;\n  object-fit: cover;\n}\n.preview-actions {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  display: flex;\n  gap: 10px;\n}\n.action-btn {\n  background: linear-gradient(135deg, #009688 60%, #26c6da 100%);\n  border: none;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px #b2dfdb;\n}\n\n.identify-btn {\n  width: 80vw;\n  max-width: 300px;\n  height: 48px;\n  font-size: 18px;\n  border-radius: 24px;\n  margin-bottom: 18px;\n  box-shadow: 0 2px 8px #b2dfdb;\n  letter-spacing: 1px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  background: linear-gradient(90deg, #009688 60%, #26c6da 100%);\n  color: #fff;\n  border: none;\n}\n\n.loading {\n  margin-top: 24px;\n  color: #009688;\n  font-size: 16px;\n  font-weight: bold;\n}\n</style>","import MiniProgramPage from 'D:/文档/HBuilderProjects/seed_identification1/pages/identify/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["chooseAndUpload","uni"],"mappings":";;;AA6BA,MAAO,WAAU,MAAW;AAE5B,MAAK,YAAU;AAAA,EACb,YAAY,EAAE,SAAU;AAAA,EACxB,OAAO;AACL,WAAO;AAAA,MACL,WAAW;AAAA,MACX,SAAS;AAAA;EAEZ;AAAA,EACD,SAAS;AAAA,IACP,MAAM,kBAAkB;AACtB,UAAI;AACF,aAAK,YAAY,MAAMA,aAAAA;MACvB,SAAO,KAAK;AACZC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACD;AAAA,IACD,eAAe;AACb,WAAK,YAAY;AAAA,IAClB;AAAA,IACD,MAAM,iBAAiB;AACrB,UAAI,CAAC,KAAK;AAAW;AACrB,WAAK,UAAU;AACf,UAAI;AACF,cAAM,MAAM,MAAM,SAAS,cAAc,KAAK,SAAS;AACvD,cAAM,SAAS,KAAK,MAAM,IAAI,IAAI;AAClCA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK,iCAAiC,mBAAmB,KAAK,UAAU,MAAM,CAAC;AAAA,QACjF,CAAC;AAAA,MACD,SAAO,KAAK;AACZA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACDA,sBAAAA,MAAA,MAAA,SAAA,kCAAc,GAAG;AAAA,MACnB,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxEA,GAAG,WAAW,eAAe;"}