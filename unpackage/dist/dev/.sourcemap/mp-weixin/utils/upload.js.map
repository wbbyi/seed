{"version":3,"file":"upload.js","sources":["utils/upload.js"],"sourcesContent":["/**\n * 选择图片并上传\r\n * @param {String} src 图片路径\n * @returns {Promise} 包含图片临时路径的Promise\n */\nexport function chooseAndUpload() {\n  return new Promise((resolve, reject) => {\n    uni.chooseImage({\n      count: 1,\n      sizeType: ['compressed'],\n      sourceType: ['album', 'camera'],\n      success: (res) => {\n        const tempFilePaths = res.tempFilePaths;\n        resolve(tempFilePaths[0]);\n      },\n      fail: (err) => {\n        reject(err);\n      }\n    });\n  });\n}\r\n\r\nexport function cropImage(src) {\n  return new Promise((resolve, reject) => {\n    uni.chooseImage({\n      count: 1,\n      sizeType: ['compressed'],\n      sourceType: ['album'],\n      success: (res) => {\n        uni.cropImage({\n          src: res.tempFilePaths[0],\n          cropScale: '1:1', // 正方形裁剪\n          success: (res) => {\n            resolve(res.tempFilePath);\n          },\n          fail: (err) => {\n            reject(err);\n          }\n        });\n      },\n      fail: (err) => {\n        reject(err);\n      }\n    });\n  });\n}"],"names":["uni"],"mappings":";;AAKO,SAAS,kBAAkB;AAChC,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCA,kBAAAA,MAAI,YAAY;AAAA,MACd,OAAO;AAAA,MACP,UAAU,CAAC,YAAY;AAAA,MACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,MAC9B,SAAS,CAAC,QAAQ;AAChB,cAAM,gBAAgB,IAAI;AAC1B,gBAAQ,cAAc,CAAC,CAAC;AAAA,MACzB;AAAA,MACD,MAAM,CAAC,QAAQ;AACb,eAAO,GAAG;AAAA,MACX;AAAA,IACP,CAAK;AAAA,EACL,CAAG;AACH;;"}